"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.ns_=t(e.ns_)}):"object"==typeof module&&module.exports?module.exports=t():e.ns_=t(e.ns_)}(this,function(e){e=e||{},e.ns_=e;var t={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;n>i;i++)if(t=arguments[i])for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(parseInt(e));return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return!this.isEmpty(e)},isEmpty:function(e){return void 0===e||null===e||""===e||e instanceof Array&&0===e.length},indexOf:function(e,t){var n=-1;return this.forEach(t,function(t,i){t==e&&(n=i)}),n},forEach:function(e,t,n){try{if("function"==typeof t)if(n="undefined"!=typeof n?n:null,"number"!=typeof e.length||"undefined"==typeof e[0]){var i="undefined"!=typeof e.__proto__;for(var s in e)e.hasOwnProperty(s)&&(!i||i&&"undefined"==typeof e.__proto__[s])&&"function"!=typeof e[s]&&t.call(n,e[s],s)}else for(var a=0,l=e.length;l>a;a++)t.call(n,e[a],a)}catch(r){}},regionMatches:function(e,t,n,i,s){if(0>t||0>i||t+s>e.length||i+s>n.length)return!1;for(;--s>=0;){var a=e.charAt(t++),l=n.charAt(i++);if(a!=l)return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if("undefined"!=typeof t&&t&&"undefined"!=typeof console&&console){var n=new Date,i=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(i,e)}},isTrue:function(e){return"undefined"==typeof e?!1:"string"==typeof e?(e=e.toLowerCase(),"true"===e||"1"===e||"on"===e):!!e},toString:function(e){if("undefined"==typeof e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(this.size(e)>0){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}return e.toString()},exists:function(e){return"undefined"!=typeof e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=function(){function e(){}function t(t){return"object"==typeof t?(e.prototype=t,new e):t}function n(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function i(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function s(e,t){var n=new i;return t&&(n.maxDepth=t),n.deepCopy(e)}function a(e){return"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document?!0:"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode}var l=[];return n.prototype={constructor:n,canCopy:function(){return!1},create:function(e){},populate:function(e,t,n){}},i.prototype={constructor:i,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,n=t.length,i=0;n>i;i++)if(t[i][0]===e)return t[i][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var n=0;n<l.length;n++){var i=l[n];if(i.canCopy(e))return this.applyDeepCopier(i,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var n=e.create(t);if(this.cacheResult(t,n),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},s.DeepCopier=n,s.deepCopiers=l,s.register=function(e){e instanceof n||(e=new n(e)),l.unshift(e)},s.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?t(e.constructor.prototype):{}},populate:function(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}}),s.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var i=0;i<t.length;i++)n.push(e(t[i]));return n}}),s.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),s.register({canCopy:function(e){return a(e)},create:function(e){return"undefined"!=typeof document&&e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if("undefined"!=typeof document&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var i=0;i<t.childNodes.length;i++){var s=e(t.childNodes[i]);n.appendChild(s)}}}),{deepCopy:s}}();return t.deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if(!navigator)return"";var e,t,n=navigator.userAgent||"",i=navigator.appName||"";return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?i="Opera":-1!=(t=n.indexOf("Android"))?i="Android":-1!=(t=n.indexOf("Chrome"))?i="Chrome":-1!=(t=n.indexOf("Safari"))?i="Safari":-1!=(t=n.indexOf("Firefox"))?i="Firefox":-1!=(t=n.indexOf("IEMobile"))?i="Internet Explorer Mobile":"Microsoft Internet Explorer"==i||"Netscape"==i?i="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))?(i=n.substring(e,t),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)):i="unknown",i},getBrowserFullVersion:function(){if(!navigator)return"";var e,t,n,i,s=navigator.userAgent||"",a=navigator.appName||"",l=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(t=s.indexOf("Opera"))?(l=s.substring(t+6),-1!=(t=s.indexOf("Version"))&&(l=s.substring(t+8))):-1!=(t=s.indexOf("OPR/"))?l=s.substring(t+4):-1!=(t=s.indexOf("Android"))?l=s.substring(t+11):-1!=(t=s.indexOf("Chrome"))?l=s.substring(t+7):-1!=(t=s.indexOf("Safari"))?(l=s.substring(t+7),-1!=(t=s.indexOf("Version"))&&(l=s.substring(t+8))):-1!=(t=s.indexOf("Firefox"))?l=s.substring(t+8):"Microsoft Internet Explorer"==a?(i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=i.exec(s)&&(l=parseFloat(RegExp.$1))):"Netscape"==a?(i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=i.exec(s)&&(l=parseFloat(RegExp.$1))):l=s.lastIndexOf(" ")+1<(t=s.lastIndexOf("/"))?s.substring(t+1):"unknown",l=l.toString(),-1!=(n=l.indexOf(";"))&&(l=l.substring(0,n)),-1!=(n=l.indexOf(" "))&&(l=l.substring(0,n)),-1!=(n=l.indexOf(")"))&&(l=l.substring(0,n)),e=parseInt(""+l,10),isNaN(e)&&(l=""+parseFloat(navigator.appVersion)),l},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window?(null!==window.ActiveXObject,!0):!0},getNamespace:function(){return e.ns_||e}};return e.StreamSense=e.StreamSense||function(){var n=function(){var e="cs_";return function(){var n="undefined"!=typeof localStorage?localStorage:null;t.extend(this,{get:function(t){return n&&n.getItem(e+t)},set:function(t,i){n&&n.setItem(e+t,i)},has:function(t){return n&&n.getItem(e+t)},remove:function(t){n&&n.removeItem(e+t)},clear:function(){for(var t=0;n&&t<n.length;++t){var i=n.key(t);i.substr(0,e.length)===e&&n.removeItem(i)}}})}}(),i=function(e,t){if("undefined"!=typeof Image){var n=new Image;n.onload=function(){t&&t(200),n=null},n.onerror=function(){t&&t(),n=null},n.src=e}},s=function(e,t,n){n&&"undefined"!=typeof setTimeout&&setTimeout(n,0)},a=function(){return{dir:function(){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(){return!1},read:function(){return null}}}(),l=function(){return{PLATFORM:"generic",httpGet:i,httpPost:s,Storage:n,IO:a,getCrossPublisherId:function(){return null},getAppName:function(){return r.UNKNOWN_VALUE},getAppVersion:function(){return r.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return r.UNKNOWN_VALUE},getPlatformVersion:function(){return r.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return r.UNKNOWN_VALUE},getRuntimeVersion:function(){return r.UNKNOWN_VALUE},getResolution:function(){return r.UNKNOWN_VALUE},getLanguage:function(){return r.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return r.UNKNOWN_VALUE},getConnectionType:function(){return r.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return r.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),r={UNKNOWN_VALUE:"unknown"};t.filterMap=function(e,n){for(var i in e)e.hasOwnProperty(i)&&-1==t.indexOf(i,n)&&delete e[i]},t.getKeys=function(e,t){var n,i=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(i[i.length]=n);return i},t.getEventTime=function(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=parseInt(e.ns_ts)),t},t.fixEventTime=function(e){var n=t.getEventTime(e);0>n&&(e.ns_ts=String(+new Date))},t.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},t.addNewPlaybackInterval=function(e,n,i,s){var a={};if(!(i>=n))return t.cloneObject(e);if(a.start=n,a.end=i,0==e.length)return e.push(a),t.cloneObject(e);var l;for(l=0;l<e.length;l++)if(a.start>=e[l].start&&a.end<=e[l].end)return t.cloneObject(e);var r,g=!1;for(r=0;r<e.length;r++)if(r+1===e.length&&a.start>=e[r].start||a.start>=e[r].start&&a.start<e[r+1].start){e.splice(r+1,0,a),g=!0;break}g||e.splice(0,0,a);var u=[e[0]];for(l=1;l<e.length;l++)u[u.length-1].end+s<e[l].start?u.push(e[l]):u[u.length-1].end<e[l].end&&(u[u.length-1].end=e[l].end);return t.cloneObject(u)};var g=function(){var e=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(t){return e[t]}}}(),u=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),_=function(){var e=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(t){return e[t]}}}(),o={STREAMSENSE_VERSION:"5.0.2.160107",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ev_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},p=function(){return function(){function e(){var e,t,n=0;for(e=0;e<P.length;e++)n+=Math.abs(P[e].end-P[e].start);F.setUniquePlaybackInterval(n);var i=0;for(e=0;e<P.length;e++)t=Math.abs(P[e].end-P[e].start),t>i&&(i=t);F.setLongestPlaybackInterval(i);var s=0;for(e=0;e<f.length;e++)s+=Math.abs(f[e].end-f[e].start);F.setAssetUniquePlaybackInterval(s);var a=0;for(e=0;e<f.length;e++)t=Math.abs(f[e].end-f[e].start),t>a&&(a=t);F.setAssetLongestPlaybackInterval(a)}var n,i,s,a,l,r,g,u,_,p,c,P,f,y,d,m,C,S,E,T,b,A,k,I,v,L,N,U,R,B,D,h,O,F=this,G=o.INTERVAL_MERGE_TOLERANCE;t.extend(this,{reset:function(e){B={},B.ns_st_pt="0",B.ns_st_bt="0",B.ns_st_bc="0",B.ns_st_pc="0",B.ns_st_sq="0",B.ns_st_cl="0",B.ns_st_pn="1",B.ns_st_tp="1",B.ns_st_skc="0",B.ns_st_et="0",B.ns_st_cn="1",B.ns_st_spc="0",B.ns_st_sc="0",B.ns_st_apc="0",B.ns_st_ska="0",B.ns_st_skd="0",B.ns_st_skt="0",B.ns_st_upc="0",B.ns_st_lpc="0",B.ns_st_upa="0",B.ns_st_lpa="0",B.ns_st_ub="0",B.ns_st_br="0",b=-1,A=0,_=-1,p=0,a=-1,r=0,l=-1,g=0,D=0,h=0,v=0,I=-1,N=!1,u=0,U=0,R=0,O=0,y=-1,s=!1,n=null,c=0,k=!1,L=0,P=[],f=[],d=0,m=0,E=0,C=0,S=0,T=0,i=!1,null!=e&&e.length>0&&F.setLabels(e)},getHash:function(){return n},setHash:function(e){n=e},setPlaybackIntervalMergeTolerance:function(e){G=e},getPlaybackIntervalMergeTolerance:function(){return G},setLabels:function(e){null!=e&&t.extend(B,e)},getLabels:function(){return B},setLabel:function(e,t){var n={};n[e]=t,F.setLabels(n)},getLabel:function(e){return B[e]},getClipNumber:function(){return parseInt(F.getLabel("ns_st_cn"))},setClipNumber:function(e){F.setLabel("ns_st_cn",String(e))},getPartNumber:function(){return parseInt(F.getLabel("ns_st_pn"))},createLabels:function(e){var n=e||{};n.ns_st_dbt=String(F.getBufferingTime()-A),A=F.getBufferingTime(),n.ns_st_det=String(F.getElapsedTime()-p),p=F.getElapsedTime(),n.ns_st_dupc=String(F.getUniquePlaybackInterval()-d),d=F.getUniquePlaybackInterval(),parseInt(n.ns_st_dupc)<0&&(n.ns_st_dupc="0");var i;i=t.exists(n.ns_st_upc)?parseInt(n.ns_st_upc):F.getUniquePlaybackInterval(),n.ns_st_iupc=String(i-m),m=i,parseInt(n.ns_st_iupc)<0&&(n.ns_st_iupc="0"),n.ns_st_dupa=String(F.getAssetUniquePlaybackInterval()-C),C=F.getAssetUniquePlaybackInterval(),parseInt(n.ns_st_dupa)<0&&(n.ns_st_dupa="0");var a;a=t.exists(n.ns_st_upa)?parseInt(n.ns_st_upa):F.getAssetUniquePlaybackInterval(),n.ns_st_iupa=String(a-S),S=a,parseInt(n.ns_st_iupa)<0&&(n.ns_st_iupa="0"),n.ns_st_dlpc=String(F.getLongestPlaybackInterval()-E),E=F.getLongestPlaybackInterval(),parseInt(n.ns_st_dlpc)<0&&(n.ns_st_dlpc="0"),n.ns_st_dlpa=String(F.getAssetLongestPlaybackInterval()-T),T=F.getAssetLongestPlaybackInterval(),parseInt(n.ns_st_dlpa)<0&&(n.ns_st_dlpa="0");var l;return l=t.exists(n.ns_st_pt)?parseInt(n.ns_st_pt):F.getPlaybackTime(),n.ns_st_ipt=String(l-g),g=l,n.ns_st_dpt=String(F.getPlaybackTime()-r),r=F.getPlaybackTime(),n.ns_st_dpc=String(F.getPauses()-D),D=F.getPauses(),n.ns_st_dskc=String(F.getSeeks()-h),h=F.getSeeks(),n.ns_st_dbc=String(F.getBuffers()-O),O=F.getBuffers(),n.ns_st_dskt=String(F.getSeekingTime()-v),v=F.getSeekingTime(),n.ns_st_dska=String(F.getSeekingAmount()-U),U=F.getSeekingAmount(),t.extend(n,F.getLabels()),F.setSeekingDirection(0),s||(delete n.ns_st_spc,delete n.ns_st_apc,0===parseInt(n.ns_st_sc)&&(n.ns_st_sc="1")),n},getVideoTrack:function(){return F.getLabel("ns_st_vt")},setVideoTrack:function(e){F.setLabel("ns_st_vt",String(e))},getAudioTrack:function(){return F.getLabel("ns_st_at")},setAudioTrack:function(e){F.setLabel("ns_st_at",String(e))},getSubtitleTrack:function(){return F.getLabel("ns_st_tt")},setSubtitleTrack:function(e){F.setLabel("ns_st_tt",String(e))},getCDN:function(){return F.getLabel("ns_st_cdn")},setCDN:function(e){F.setLabel("ns_st_cdn",String(e))},getClipPlaybackIntervals:function(){return P},setClipPlaybackIntervals:function(e){P=e},getAssetPlaybackIntervals:function(){return f},getUniquePlaybackInterval:function(){return parseInt(F.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(F.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(e){F.setLabel("ns_st_upa",String(e))},setUniquePlaybackInterval:function(e){F.setLabel("ns_st_upc",String(e))},getLongestPlaybackInterval:function(){return parseInt(F.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(e){F.setLabel("ns_st_lpc",String(e))},getAssetLongestPlaybackInterval:function(){return parseInt(F.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(e){F.setLabel("ns_st_lpa",String(e))},incrementPauses:function(){F.setLabel("ns_st_pc",String(F.getPauses()+1))},incrementSeeks:function(){F.setLabel("ns_st_skc",String(F.getSeeks()+1))},incrementPlayCounter:function(){F.setLabel("ns_st_sq",String(parseInt(F.getLabel("ns_st_sq"))+1))},getBufferingTime:function(){return parseInt(F.getLabel("ns_st_bt"))},setBufferingTime:function(e){F.setLabel("ns_st_bt",String(e))},addBufferingTime:function(e){if(b>=0){var t=F.getBufferingTime();t+=e-b,F.setBufferingTime(t),b=-1}},setPlaybackStartPosition:function(e){y=parseInt(e)},getPlaybackStartPosition:function(){return y},addInterval:function(n){y>=0&&parseInt(n)>=0&&(P=t.addNewPlaybackInterval(P,y,n,G),f=t.addNewPlaybackInterval(f,y,n,G),e(),y=-1)},getElapsedTime:function(){return parseInt(F.getLabel("ns_st_et"))},setElapsedTime:function(e){F.setLabel("ns_st_et",String(e))},addElapsedTime:function(e){if(_>=0){var t=F.getElapsedTime();t+=e-_,F.setElapsedTime(t),_=-1}},getElapsedTimestamp:function(){return _},setElapsedTimestamp:function(e){_=e},addPlaybackTime:function(e){if(a>0){var t=F.getPlaybackTime();t+=e-a,F.setPlaybackTime(t),a=-1}},getPlaybackTime:function(){return parseInt(F.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(e){return a>0&&(u+=e-a),u},setPlaybackTimeOffset:function(e){u=e},getPlaybackTimeOffset:function(){return u},setPlaybackTime:function(e){F.setLabel("ns_st_pt",String(e))},getPlaybackTimestamp:function(){return a},setPlaybackTimestamp:function(e){a=e},setPreviousPlaybackTime:function(e){r=e},setPreviousPlaybackTimestamp:function(e){l=e},getBufferingTimestamp:function(){return b},setBufferingTimestamp:function(e){b=e},getPauses:function(){return parseInt(F.getLabel("ns_st_pc"))},setPauses:function(e){F.setLabel("ns_st_pc",String(e))},getSeeks:function(){return parseInt(F.getLabel("ns_st_skc"))},setSeeks:function(e){F.setLabel("ns_st_skc",String(e))},setSeeking:function(e){k=e},isSeeking:function(){return k},setCollectingSeekingTime:function(e){N=e},isCollectingSeekingTime:function(){return N},setClipStarted:function(e){i=e},isClipStarted:function(){return i},setPlaybackStarted:function(e){s=e},isPlaybackStarted:function(){return s},setSeekingTimestamp:function(e){I=e},getSeekingTimestamp:function(){return I},addSeekingTime:function(e){if(I>0){var t=F.getSeekingTime();t+=e-I,F.setSeekingTime(t),I=-1}},getSeekingTime:function(){return parseInt(F.getLabel("ns_st_skt"))},setSeekingTime:function(e){F.setLabel("ns_st_skt",String(e))},setSeekingTimeBeforeEnd:function(e){R=e},getSeekingTimeBeforeEnd:function(){return R},setSeekStartPosition:function(e){L=e},getSeekStartPosition:function(){return L},setSeekingAmount:function(e){F.setLabel("ns_st_ska",String(e))},getSeekingAmount:function(){return parseInt(F.getLabel("ns_st_ska"))},addSeekingAmount:function(e){var t=F.getSeekingAmount();t+=Math.abs(e-L),F.setSeekingAmount(t);var n;L==e?n=0:L>e?n=-1:e>L&&(n=1),F.setSeekingDirection(n),L=0},getSeekingDirection:function(){return parseInt(F.getLabel("ns_st_skd"))},setSeekingDirection:function(e){F.setLabel("ns_st_skd",String(e))},resetClipLifecycleLabels:function(){B.ns_st_pt="0",r=0,g=0,B.ns_st_bt="0",A=0,B.ns_st_bc="0",O=0,B.ns_st_pc="0",D=0,B.ns_st_sq="0",B.ns_st_upa="0",C=0,S=0,B.ns_st_et="0",p=0,B.ns_st_lpa="0",T=0,B.ns_st_skt="0",v=0,B.ns_st_ska="0",U=0,B.ns_st_skc="0",h=0},incrementSegmentPlaybackCounter:function(){F.setLabel("ns_st_spc",String(F.getSegmentPlaybackCounter()+1))},incrementClipLoadCounter:function(){F.setLabel("ns_st_sc",String(F.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){F.setLabel("ns_st_apc",String(F.getAssetPlaybackCounter()+1))},setPreviousUniquePlaybackInterval:function(e){d=e},setPreviousEventIndependentUniquePlaybackInterval:function(e){m=e},setPreviousLongestPlaybackInterval:function(e){E=e},resetAssetPlaybackCounters:function(){f=[],F.setAssetUniquePlaybackInterval(0),C=0,S=0,F.setAssetLongestPlaybackInterval(0),T=0},setSegmentPlaybackCounter:function(e){F.setLabel("ns_st_spc",String(e))},setClipLoadCounter:function(e){F.setLabel("ns_st_sc",String(e))},setAssetPlaybackCounter:function(e){F.setLabel("ns_st_apc",String(e))},setLowestPartNumberPlayed:function(e){c=e},getSegmentPlaybackCounter:function(){return parseInt(F.getLabel("ns_st_spc"))},getClipLoadCounter:function(){return parseInt(F.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return parseInt(F.getLabel("ns_st_apc"))},getLowestPartNumberPlayed:function(){return c},getBuffers:function(){return parseInt(F.getLabel("ns_st_bc"))},incrementBufferCount:function(){F.setLabel("ns_st_bc",String(F.getBuffers()+1))},getPreviousBufferingTime:function(){return A}}),F.reset()}}(),c=function(){return function(){var e,n,i,s,a,l,r,g,u=this;t.extend(this,{reset:function(u){s={},s.ns_st_bp="0",s.ns_st_pa="0",s.ns_st_pp="0",s.ns_st_sp="1",s.ns_st_id=String(+new Date),s.ns_st_ppc="0",n=-1,i=-1,l=[],r=0,a=!1,g=!1,null!=u&&u.length>0&&t.extend(s,u),e.reset(u)},hashExists:function(e){return null!=l[e]},storeHash:function(e){l[e]={}},removeHash:function(e){delete l[e]},storeClipPlaybackCounters:function(){for(var n in l)if(l.hasOwnProperty(n)&&l[n].clipNumber===e.getClipNumber()){t.extend(l[n],{segmentPlaybackCounter:e.getSegmentPlaybackCounter(),clipLoadCounter:e.getClipLoadCounter(),assetPlaybackCounter:e.getAssetPlaybackCounter(),lowestPartNumberPlayed:e.getLowestPartNumberPlayed(),seeking:e.isSeeking(),seekingTimeBeforeEnd:e.getSeekingTimeBeforeEnd(),seekingStartPosition:e.getSeekStartPosition(),clipPlaybackIntervals:e.getClipPlaybackIntervals(),uniquePlaybackInterval:e.getUniquePlaybackInterval(),longestPlaybackInterval:e.getLongestPlaybackInterval(),videoTrack:e.getVideoTrack(),audioTrack:e.getAudioTrack(),subtitleTrack:e.getSubtitleTrack(),cdn:e.getCDN()});break}},getStoredClipRegisters:function(e){return l[e]},getClipNumber:function(e){return l[e].clipNumber},getMaxClipNumber:function(){return r},storeClipNumber:function(e,t){l[e].clipNumber=t,t>r&&(r=t)},setLabels:function(e){null!=e&&t.extend(s,e)},getLabels:function(){return s},setLabel:function(e,t){var n={};n[e]=t,u.setLabels(n)},getLabel:function(e){return s[e]},getClip:function(){return e},createLabels:function(n){var i=n||{};return g||(i.ns_st_pb=null!=i.ns_st_pb?i.ns_st_pb:"1",g=!0),t.extend(i,u.getLabels()),e.isPlaybackStarted()||delete i.ns_st_ppc,i},incrementPlayCounter:function(){u.setLabel("ns_st_sp",String(parseInt(u.getLabel("ns_st_sp"))+1))},incrementPauses:function(){u.setLabel("ns_st_pp",String(u.getPauses()+1))},addPlaybackTime:function(e){if(i>=0){var t=u.getPlaybackTime();t+=e-i,u.setPlaybackTime(t),i=-1}},addBufferingTime:function(e){if(n>=0){var t=u.getBufferingTime();t+=e-n,u.setBufferingTime(t),n=-1}},getBufferingTime:function(){return parseInt(u.getLabel("ns_st_bp"))},setBufferingTime:function(e){u.setLabel("ns_st_bp",String(e))},getPlaybackTime:function(){return parseInt(u.getLabel("ns_st_pa"))},setBufferingTimestamp:function(e){n=e},getBufferingTimestamp:function(){return n},setPlaybackTime:function(e){u.setLabel("ns_st_pa",String(e))},setPlaybackTimestamp:function(e){i=e},getPlaybackTimestamp:function(){return i},getPauses:function(){return parseInt(u.getLabel("ns_st_pp"))},setPauses:function(e){u.setLabel("ns_st_pp",String(e))},isPlaylistStarted:function(){return a},setPlaylistStarted:function(e){a=e},getPlaybackCounter:function(){return parseInt(u.getLabel("ns_st_ppc"))},incrementPlaybackCounter:function(){u.setLabel("ns_st_ppc",String(u.getPlaybackCounter()+1))}}),e=new p,u.reset()}}(),P=function(){return function(e){function n(){l=1}function i(n){r=t.extend({},n);var i=e.getPixelURL();if(e.getAppCore()){if(!e.isNotProperlyInitialized()){var s=e.getExports().am,a=e.getExports().et,l=s.newApplicationMeasurement(e.getAppCore(),a.HIDDEN,n,i);e.getAppCore().getQueue().offer(l)}}else i&&e.getPlatformAPI().httpGet(e.prepareUrl(i,n))}function s(){r=null}function a(){var n,i;1==arguments.length?(n=null,i=arguments[0]):(n=arguments[0],i=arguments[1]);var s={};if("undefined"!=typeof document){var a=document;s.c7=a.URL,s.c8=a.title,s.c9=a.referrer}return null!=i&&t.extend(s,i),s.ns_ts=null!=s.ns_ts?s.ns_ts:String(+new Date),s.ns_st_ev=null!=s.ns_st_ev?s.ns_st_ev:g.toString(n),s.ns_st_mp=null!=s.ns_st_mp?s.ns_st_mp:e.getMediaPlayerName(),s.ns_st_mv=null!=s.ns_st_mv?s.ns_st_mv:e.getMediaPlayerVersion(),s.ns_st_ub=null!=s.ns_st_ub?s.ns_st_ub:"0",s.ns_st_br=null!=s.ns_st_br?s.ns_st_br:"0",s.ns_st_pn=null!=s.ns_st_pn?s.ns_st_pn:"1",s.ns_st_tp=null!=s.ns_st_tp?s.ns_st_tp:"1",s.ns_st_it=null!=s.ns_st_it?s.ns_st_it:_.toString(_.SINGLE_CLIP),s.ns_st_sv=null!=s.ns_st_sv?s.ns_st_sv:o.STREAMSENSE_VERSION,s.ns_type=null!=s.ns_type?s.ns_type:"hidden",s.ns_st_ec=null!=s.ns_st_ec?s.ns_st_ec:String(l),s.ns_st_po=null!=s.ns_st_po?s.ns_st_po:String(e.getPlaylist().getClip().getExpectedPlaybackPosition(t.getEventTime(s))),s.ns_st_ki=null!=s.ns_st_ki?s.ns_st_ki:String(e.getKeepAlive().getInterval()),e.getPlaylist().createLabels(s),e.getPlaylist().getClip().createLabels(s),t.extend(s,e.getLabels()),s}var l,r,u=this;t.extend(this,{newEvent:function(e,n){var s=a(e,n);t.extend(s,n),i(s),e!=g.HEARTBEAT&&u.incrementEventCounter()},getEventCounter:function(){return l},incrementEventCounter:function(){l++},setEventCounter:function(e){l=e},getMeasurementSnapshot:function(){return r},reset:function(){n(),s()}}),u.reset()}}(),f=function(){return function(e){function n(){r++;var n={};t.fixEventTime(n);var i=t.getEventTime(n);n.ns_st_po=String(e.getPlaylist().getClip().getPlaybackTimeOffset()+(i-e.getPlaylist().getClip().getPlaybackTimestamp())),n.ns_st_pa=String(e.getPlaylist().getPlaybackTime()+(i-e.getPlaylist().getPlaybackTimestamp())),n.ns_st_pt=String(e.getPlaylist().getClip().getPlaybackTime()+(i-e.getPlaylist().getClip().getPlaybackTimestamp())),n.ns_st_dpt=String(i-e.getPlaylist().getClip().getPlaybackTimestamp()),e.getStateMachine().getCurrentState()==u.BUFFERING_DURING_PLAYBACK?(n.ns_st_bp=String(e.getPlaylist().getBufferingTime()+(i-e.getPlaylist().getBufferingTimestamp())),n.ns_st_bt=String(e.getPlaylist().getClip().getBufferingTime()+(i-e.getPlaylist().getClip().getBufferingTimestamp())),n.ns_st_dbt=String(i-e.getPlaylist().getClip().getBufferingTimestamp())):n.ns_st_dbt=String(e.getPlaylist().getClip().getBufferingTime()-e.getPlaylist().getClip().getPreviousBufferingTime()),n.ns_st_et=String(e.getPlaylist().getClip().getElapsedTime()+(i-e.getPlaylist().getClip().getElapsedTimestamp())),n.ns_st_det=String(i-e.getPlaylist().getClip().getElapsedTimestamp());var s=t.cloneObject(e.getPlaylist().getClip().getClipPlaybackIntervals()),l=t.cloneObject(e.getPlaylist().getClip().getAssetPlaybackIntervals());s=t.addNewPlaybackInterval(s,e.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(n.ns_st_po),e.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),l=t.addNewPlaybackInterval(l,e.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(n.ns_st_po),e.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var o,p,c=0;for(o=0;o<s.length;o++)c+=Math.abs(s[o].end-s[o].start);n.ns_st_upc=String(c),n.ns_st_dupc=String(c-e.getPlaylist().getClip().getUniquePlaybackInterval());var P=0;for(o=0;o<s.length;o++)p=Math.abs(s[o].end-s[o].start),p>P&&(P=p);n.ns_st_lpc=String(P),n.ns_st_dlpc=String(P-e.getPlaylist().getClip().getLongestPlaybackInterval());var f=0;for(o=0;o<l.length;o++)f+=Math.abs(l[o].end-l[o].start);n.ns_st_upa=String(f),n.ns_st_dupa=String(f-e.getPlaylist().getClip().getAssetUniquePlaybackInterval());var y=0;for(o=0;o<l.length;o++)p=Math.abs(l[o].end-l[o].start),p>y&&(y=p);n.ns_st_lpa=String(y),n.ns_st_dlpa=String(y-e.getPlaylist().getClip().getAssetLongestPlaybackInterval()),n.ns_st_hc=String(e.getHeartbeat().getCount()),e.getEventManager().newEvent(g.HEARTBEAT,n),a=0,_.resume()}function i(){null!=s&&(e.getPlatformAPI().clearTimeout(s),s=null)}var s,a,l,r,_=this,p=o.DEFAULT_HEARTBEAT_INTERVAL;t.extend(this,{getCount:function(){return r},setIntervals:function(e){p=e},getInterval:function(e){var t=0;if(null!=p)for(var n=0;n<p.length;n++){var i=p[n],s=i.playingtime;if(!s||s>e){t=i.interval;break}}return t},resume:function(){i();var t=_.getInterval(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()));if(t>0){var l=a>0?a:t;s=e.getPlatformAPI().setTimeout(n,l)}a=0},pause:function(){i();var t=_.getInterval(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()));a=t-(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()))%t;
},reset:function(){i(),a=0,l=0,r=0}}),_.reset()}}(),y=function(){return function(e){function n(){var n={};t.fixEventTime(n);var i=t.getEventTime(n);n.ns_st_po=String(e.getPlaylist().getClip().getExpectedPlaybackPosition(i)),e.getPlaylist().addPlaybackTime(i),e.getPlaylist().setPlaybackTimestamp(i),e.getPlaylist().getClip().addPlaybackTime(i),e.getPlaylist().getClip().setPlaybackTimestamp(i),e.getStateMachine().getCurrentState()==u.BUFFERING_DURING_PLAYBACK&&(e.getPlaylist().addBufferingTime(i),e.getPlaylist().setBufferingTimestamp(i),e.getPlaylist().getClip().addBufferingTime(i),e.getPlaylist().getClip().setBufferingTimestamp(i)),e.getPlaylist().getClip().addElapsedTime(i),e.getPlaylist().getClip().setElapsedTimestamp(i),e.getPlaylist().getClip().addInterval(parseInt(n.ns_st_po)),e.getPlaylist().getClip().setPlaybackStartPosition(parseInt(n.ns_st_po)),e.getEventManager().newEvent(g.KEEPALIVE,n),a.resume()}function i(){null!=s&&(e.getPlatformAPI().clearTimeout(s),s=null)}var s,a=this,l=o.DEFAULT_KEEP_ALIVE_INTERVAL;t.extend(this,{resume:function(){i(),s=e.getPlatformAPI().setTimeout(n,l)},setInterval:function(e){l=e},getInterval:function(){return l},reset:function(){i()}})}}(),d=function(){return function(e){function n(e){return e==u.PLAYING||e==u.PAUSED}function i(){s(),y=e.getPlatformAPI().setTimeout(function(){var e={};t.fixEventTime(e),A.transitionTo(g.PAUSE_ON_BUFFERING,A.eventTypeToState(g.PAUSE_ON_BUFFERING),e)},k)}function s(){null!=y&&(e.getPlatformAPI().clearTimeout(y),y=null)}function a(){c&&(e.getPlatformAPI().clearTimeout(c),c=null)}function l(n,a,l,_){var o=t.getEventTime(l);n==g.AD_SKIP&&!l.hasOwnProperty("ns_st_ui")&&r(n)?l.ns_st_ui="skip":n==g.SEEK_START&&!l.hasOwnProperty("ns_st_ui")&&r(n)&&(l.ns_st_ui="seek"),(A.getCurrentState()==u.PLAYBACK_NOT_STARTED||A.getCurrentState()==u.PAUSED||A.getCurrentState()==u.SEEKING_BEFORE_PLAYBACK||A.getCurrentState()==u.SEEKING_DURING_PLAYBACK||A.getCurrentState()==u.SEEKING_DURING_BUFFERING||A.getCurrentState()==u.SEEKING_DURING_PAUSE)&&n==g.BUFFER&&(e.getPlaylist().setBufferingTimestamp(o),e.getPlaylist().getClip().setBufferingTimestamp(o)),(A.getCurrentState()==u.PAUSED||A.getCurrentState()==u.BUFFERING_DURING_PAUSE)&&n==g.SEEK_START&&(e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(o),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o))),(A.getCurrentState()==u.SEEKING_DURING_BUFFERING||A.getCurrentState()==u.SEEKING_DURING_PAUSE)&&n==g.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)),(A.getCurrentState()==u.BUFFERING_DURING_SEEKING||A.getCurrentState()==u.BUFFERING_DURING_PAUSE)&&n==g.BUFFER_STOP&&(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o)),(A.getCurrentState()==u.SEEKING_DURING_PLAYBACK||A.getCurrentState()==u.SEEKING_DURING_PAUSE)&&n==g.PAUSE&&e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),(A.getCurrentState()==u.SEEKING_DURING_BUFFERING||A.getCurrentState()==u.SEEKING_DURING_PAUSE)&&(n==g.END||n==g.AD_SKIP)&&(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()),(A.getCurrentState()==u.SEEKING_DURING_BUFFERING||A.getCurrentState()==u.SEEKING_DURING_PAUSE)&&n==g.BUFFER_STOP&&e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),A.getCurrentState()==u.IDLE?n==g.BUFFER?(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().setBufferingTimestamp(o),e.getPlaylist().getClip().setBufferingTimestamp(o)):n==g.SEEK_START?(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o)):n==g.PLAY&&(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),T||(l.ns_st_lt=String(E+(+new Date-S)),T=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.PLAYBACK_NOT_STARTED?n==g.END||n==g.AD_SKIP?(e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.SEEK_START?(e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().setSeekingTimestamp(o):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o))):n==g.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),T||(l.ns_st_lt=String(E+(+new Date-S)),T=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.PLAYING?n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().addInterval(a),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.BUFFER?(d&&i(),e.getPlaylist().getClip().incrementBufferCount(),e.getPlaylist().setBufferingTimestamp(o),e.getPlaylist().getClip().setBufferingTimestamp(o)):n==g.SEEK_START?(e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().addInterval(a),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(g.PAUSE,l)):n==g.PAUSE&&(e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().addInterval(a),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(g.PAUSE,l)):A.getCurrentState()==u.PAUSED?n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.BUFFERING_BEFORE_PLAYBACK?n==g.END||n==g.AD_SKIP?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.BUFFER_STOP?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):n==g.SEEK_START?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(o),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o))):n==g.PAUSE?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):n==g.PLAY&&(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),T||(l.ns_st_lt=String(E+(+new Date-S)),T=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.BUFFERING_DURING_PLAYBACK?n==g.PAUSE_ON_BUFFERING?(s(),e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().addInterval(a),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(g.PAUSE,l),e.getPlaylist().setBufferingTimestamp(o),e.getPlaylist().getClip().setBufferingTimestamp(o)):n==g.BUFFER_STOP?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o)):n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),s(),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().addInterval(a),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.SEEK_START?(s(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().addInterval(a),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(g.PAUSE,l)):n==g.PAUSE?(s(),e.getPlaylist().addPlaybackTime(o),e.getPlaylist().getClip().addPlaybackTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().addInterval(a),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(g.PAUSE,l)):n==g.PLAY&&(s(),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o)):A.getCurrentState()==u.BUFFERING_DURING_SEEKING?n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),s(),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.PAUSE?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):n==g.PLAY&&(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.BUFFERING_DURING_PAUSE?n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.PAUSE?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o)):n==g.PLAY&&(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.SEEKING_BEFORE_PLAYBACK?n==g.END||n==g.AD_SKIP?(e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.PAUSE?e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)):n==g.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),T||(l.ns_st_lt=String(E+(+new Date-S)),T=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.SEEKING_DURING_PLAYBACK?n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(a),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),T||(l.ns_st_lt=String(E+(+new Date-S)),T=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):A.getCurrentState()==u.SEEKING_DURING_BUFFERING?n==g.PAUSE&&(e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(o),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):A.getCurrentState()==u.PAUSED_DURING_BUFFERING&&(n==g.END||n==g.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().addElapsedTime(o),e.getEventManager().newEvent(g.END,l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(o-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),l.hasOwnProperty("ns_st_pe")&&"0"!==String(l.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):n==g.BUFFER_STOP?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l)):n==g.SEEK_START?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(o),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(a),e.getPlaylist().getClip().setSeekingTimestamp(o))):n==g.PAUSE?(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses()):n==g.PLAY&&(e.getPlaylist().addBufferingTime(o),e.getPlaylist().getClip().addBufferingTime(o),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(o),e.getPlaylist().getClip().setPlaybackTimestamp(o),e.getPlaylist().getClip().addElapsedTime(o),e.getPlaylist().getClip().setElapsedTimestamp(o),e.getPlaylist().getClip().setPlaybackStartPosition(a),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(g.PLAY,l))),A.setCurrentState(A.eventTypeToState(n));for(var p=0,c=b.length;c>p;p++)b[p](A.getPreviousState(),A.getCurrentState(),l,_)}function r(e){if(f==u.IDLE||f==u.PLAYBACK_NOT_STARTED||f==u.BUFFERING_BEFORE_PLAYBACK||f==u.SEEKING_BEFORE_PLAYBACK){if(e==g.PLAY)return!0}else if(f==u.PLAYING){if(e==g.END||e==g.AD_SKIP||e==g.SEEK_START||e==g.PAUSE)return!0}else if(f==u.PAUSED||f==u.BUFFERING_DURING_PAUSE||f==u.SEEKING_DURING_PLAYBACK||f==u.SEEKING_DURING_BUFFERING||f==u.SEEKING_DURING_PAUSE){if(e==g.END||e==g.AD_SKIP||e==g.PLAY)return!0}else if(f==u.BUFFERING_DURING_PLAYBACK){if(e==g.PAUSE_ON_BUFFERING||e==g.END||e==g.AD_SKIP||e==g.SEEK_START||e==g.PAUSE||e==g.PLAY)return!0}else if(f==u.BUFFERING_DURING_SEEKING){if(e==g.END||e==g.AD_SKIP||e==g.PAUSE||e==g.PLAY)return!0}else if(f==u.PAUSED_DURING_BUFFERING&&(e==g.END||e==g.AD_SKIP||e==g.BUFFER_STOP||e==g.PLAY))return!0;return!1}function _(e){return null!=e&&f!=e}var p,c,P,f,y,d,m,C,S,E,T,b,A=this,k=o.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,I=o.THROTTLING_DELAY;t.extend(this,{eventTypeToState:function(e){if(A.getCurrentState()==u.IDLE){if(e==g.PLAY)return u.PLAYING;if(e==g.SEEK_START)return u.SEEKING_BEFORE_PLAYBACK;if(e==g.BUFFER)return u.BUFFERING_BEFORE_PLAYBACK}else if(A.getCurrentState()==u.PLAYBACK_NOT_STARTED){if(e==g.PLAY)return u.PLAYING;if(e==g.SEEK_START)return u.SEEKING_BEFORE_PLAYBACK;if(e==g.BUFFER)return u.BUFFERING_BEFORE_PLAYBACK;if(e==g.END||e==g.AD_SKIP)return u.IDLE}else if(A.getCurrentState()==u.PLAYING){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.BUFFER)return u.BUFFERING_DURING_PLAYBACK;if(e==g.PAUSE)return u.PAUSED;if(e==g.SEEK_START)return u.SEEKING_DURING_PLAYBACK}else if(A.getCurrentState()==u.PAUSED){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.BUFFER)return u.BUFFERING_DURING_PAUSE;if(e==g.PLAY)return u.PLAYING;if(e==g.SEEK_START)return u.SEEKING_DURING_PAUSE}else if(A.getCurrentState()==u.BUFFERING_BEFORE_PLAYBACK){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PAUSE||e==g.BUFFER_STOP)return u.PLAYBACK_NOT_STARTED;if(e==g.PLAY)return u.PLAYING;if(e==g.SEEK_START)return u.SEEKING_BEFORE_PLAYBACK}else if(A.getCurrentState()==u.BUFFERING_DURING_PLAYBACK){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY||e==g.BUFFER_STOP)return u.PLAYING;if(e==g.PAUSE_ON_BUFFERING)return u.PAUSED_DURING_BUFFERING;if(e==g.SEEK_START)return u.SEEKING_DURING_BUFFERING;if(e==g.PAUSE)return u.PAUSED}else if(A.getCurrentState()==u.BUFFERING_DURING_SEEKING){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY)return u.PLAYING;if(e==g.BUFFER_STOP)return u.SEEKING_DURING_PLAYBACK;if(e==g.PAUSE)return u.PAUSED}else if(A.getCurrentState()==u.BUFFERING_DURING_PAUSE){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY)return u.PLAYING;if(e==g.SEEK_START)return u.SEEKING_DURING_PAUSE;if(e==g.BUFFER_STOP||e==g.PAUSE)return u.PAUSED}else if(A.getCurrentState()==u.SEEKING_BEFORE_PLAYBACK){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PAUSE)return u.PLAYBACK_NOT_STARTED;if(e==g.PLAY)return u.PLAYING;if(e==g.BUFFER)return u.BUFFERING_BEFORE_PLAYBACK}else if(A.getCurrentState()==u.SEEKING_DURING_PLAYBACK){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY)return u.PLAYING;if(e==g.PAUSE)return u.PAUSED;if(e==g.BUFFER)return u.BUFFERING_DURING_SEEKING}else if(A.getCurrentState()==u.SEEKING_DURING_BUFFERING){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY)return u.PLAYING;if(e==g.PAUSE||e==g.BUFFER_STOP)return u.PAUSED}else if(A.getCurrentState()==u.SEEKING_DURING_PAUSE){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.PLAY)return u.PLAYING;if(e==g.PAUSE||e==g.BUFFER_STOP)return u.PAUSED;if(e==g.BUFFER)return u.BUFFERING_DURING_PAUSE}else if(A.getCurrentState()==u.PAUSED_DURING_BUFFERING){if(e==g.END||e==g.AD_SKIP)return u.IDLE;if(e==g.SEEK_START)return u.SEEKING_DURING_BUFFERING;if(e==g.PAUSE)return u.PAUSED;if(e==g.PLAY||e==g.BUFFER_STOP)return u.PLAYING}return null},reset:function(){f=u.IDLE,P=null,p=-1,m=null,C=!0,E=0,d=!0,s(),a()},getCurrentState:function(){return f},setCurrentState:function(e){f!=e&&(P=f,f=e,p=+new Date)},getPreviousState:function(){return P},transitionTo:function(i,s,r,o){if(a(),_(s))if(A.isThrottlingEnabled()&&n(f)&&n(s)&&!o)c=e.getPlatformAPI().setTimeout(function(e,t,n){return function(){A.transitionTo(e,t,n,!0)}}(i,s,r),I);else{var P=t.getEventTime(r),y=p>=0?P-p:0;r.ns_st_po||(e.getStateMachine().getCurrentState()==u.PLAYING&&i==g.BUFFER||e.getStateMachine().getCurrentState()==u.BUFFERING_DURING_PLAYBACK&&i==g.BUFFER_STOP?r.ns_st_po=String(e.getPlaylist().getClip().getPlaybackTimeOffset()+(P-e.getPlaylist().getClip().getPlaybackTimestamp())):r.ns_st_po=String(e.getPlaylist().getClip().getExpectedPlaybackPosition(P))),
l(i,parseInt(r.ns_st_po),r,y)}},setPauseOnBufferingInterval:function(e){k=e},getPauseOnBufferingInterval:function(){return k},isPauseOnBufferingEnabled:function(){return d},setPauseOnBufferingEnabled:function(e){d=e},setThrottlingDelay:function(e){I=e},getThrottlingDelay:function(){return I},isThrottlingEnabled:function(){return C},setThrottlingEnabled:function(e){C=e},getLoadTimeOffset:function(){return E},setLoadTimeOffset:function(e){E=e},addListener:function(e){b.push(e)},removeListener:function(e){b.splice(t.indexOf(e,b),1)}}),T=!1,S=+new Date,b=[],A.reset()}}(),m=function(){return function(e,n){function i(e,n){var i=e||"",s="undefined",a=B.comScore||B.sitestat||function(e){var n,i,a,l,r,g="comScore=",u=D.cookie,_="",p="indexOf",c="substring",P="length",f=t.browserAcceptsLargeURLs()?o.URL_LENGTH_LIMIT:o.RESTRICTED_URL_LENGTH_LIMIT,y="&ns_",d="&",m=B.encodeURIComponent||escape;if(u[p](g)+1)for(l=0,a=u.split(";"),r=a[P];r>l;l++)i=a[l][p](g),i+1&&(_=d+unescape(a[l][c](i+g[P])));e+=y+"_t="+ +new Date+y+"c="+(D.characterSet||D.defaultCharset||"")+_,e.length>f&&e.indexOf(d)>0&&(n=e.substr(0,f-8).lastIndexOf(d),e=(e.substring(0,n)+y+"cut="+m(e.substring(n+1))).substr(0,f)),v.getPlatformAPI().httpGet(e),typeof ns_p===s&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(typeof n!==s){var l=[],r=B.encodeURIComponent||escape;for(var g in n)n.hasOwnProperty(g)&&l.push(r(g)+"="+r(n[g]));/[\?\&]$/.test(i)||(i+="&"),i+=l.join("&")}return a(i)}function s(e,n){for(var i,s=B.encodeURIComponent||escape,a=[],l=o.LABELS_ORDER,r=e.split("?"),g=r[0],u=r[1],_=u.split("&"),p=0,c=_.length;c>p;p++){var P=_[p].split("="),f=unescape(P[0]),y=unescape(P[1]);f&&(n[f]=y)}for(var d={},m=0,C=l.length;C>m;m++){var S=l[m];if(n.hasOwnProperty(S)){var E=n[S];"undefined"!=typeof E&&null!=E&&(d[S]=!0,a.push(s(S)+"="+s(n[S])))}}for(var T in n)if(n.hasOwnProperty(T)){if(d[T])continue;var b=n[T];"undefined"!=typeof b&&null!=b&&a.push(s(T)+"="+s(n[T]))}i=g+"?"+a.join("&"),i=i+(i.indexOf("&c8=")<0?"&c8="+s(D.title):"")+(i.indexOf("&c7=")<0?"&c7="+s(D.URL):"")+(i.indexOf("&c9=")<0?"&c9="+s(D.referrer):"");var A=t.browserAcceptsLargeURLs()?o.URL_LENGTH_LIMIT:o.RESTRICTED_URL_LENGTH_LIMIT;if(i.length>A&&i.indexOf("&")>0){var k=i.substr(0,A-8).lastIndexOf("&");i=(i.substring(0,k)+"&ns_cut="+s(i.substring(k+1))).substr(0,A)}return i}function a(e,t){v.notify(g.CUSTOM,e,t)}function p(){I&&A.getCurrentState()!=u.IDLE&&v.end()}var m,C,S,E,T,b,A,k,I,v=this,L=o.DEFAULT_PLAYERNAME,N=o.STREAMSENSE_VERSION,U=o.STANDARD_METADATA_LABELS,R={};t.extend(this,{isNotProperlyInitialized:function(){var e=k.getAppContext(),t=k.getSalt(),n=k.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length},reset:function(e){S=S||new c,E=E||new f(v),T=T||new P(v),b=b||new y(v),A=A||new d(v),S.reset(e),null==e||e.isEmpty()?m={}:t.filterMap(m,e),T.reset(),E.reset(),b.reset(),A.reset(),L=o.DEFAULT_PLAYERNAME,N=o.STREAMSENSE_VERSION,I=!0},getAppCore:function(){return k},getPlatformAPI:function(){return k?k.getPlatformAPI():l},getExports:function(){return R},getHeartbeat:function(){return E},getKeepAlive:function(){return b},getEventManager:function(){return T},getStateMachine:function(){return A},getMediaPlayerName:function(){return L},getMediaPlayerVersion:function(){return N},setPauseOnBufferingInterval:function(e){A.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return A.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){b.setInterval(e)},getKeepAliveInterval:function(){return b.getInterval()},setHeartbeatIntervals:function(e){E.setIntervals(e)},play:function(e,t){v.notify(g.PLAY,e,t)},pause:function(e,t){v.notify(g.PAUSE,e,t)},end:function(e,t){v.notify(g.END,e,t)},bufferStart:function(e,t){v.notify(g.BUFFER,e,t)},bufferStop:function(e,t){v.notify(g.BUFFER_STOP,e,t)},load:function(e,t){v.notify(g.LOAD,e,t)},start:function(e,t){v.notify(g.START,e,t)},seekStart:function(e,t){v.notify(g.SEEK_START,e,t)},skipAd:function(e,t){v.notify(g.AD_SKIP,e,t)},callToAction:function(e,t){v.notify(g.CTA,e,t)},error:function(e,t){v.notify(g.ERROR,e,t)},transferPlayback:function(e,t){v.notify(g.TRANSFER,e,t)},drmFail:function(e,t){v.notify(g.DRM_FAILED,e,t)},drmApprove:function(e,t){v.notify(g.DRM_APPROVED,e,t)},drmDeny:function(e,t){v.notify(g.DRM_DENIED,e,t)},changeBitrate:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_br=String(e),v.notify(g.BIT_RATE,i,t)}},changePlaybackRate:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_rt=String(e),v.notify(g.PLAYBACK_RATE,i,t)}},changeVolume:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_vo=String(e),v.notify(g.VOLUME,i,t)}},changeWindowState:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_ws=String(e),v.notify(g.WINDOW_STATE,i,t)}},changeAudio:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_at=String(e),v.notify(g.AUDIO,i,t)}},changeVideo:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_vt=String(e),v.notify(g.VIDEO,i,t)}},changeSubtitle:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_tt=String(e),v.notify(g.SUBS,i,t)}},changeCDN:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_cdn=String(e),v.notify(g.CDN,i,t)}},notify:function(){var e,n,i,s;if(n=arguments[0],3==arguments.length?("object"==typeof arguments[1]?i=arguments[1]:("string"==typeof arguments[1]||"number"==typeof arguments[1])&&(s=arguments[1]),"object"==typeof arguments[2]?i=arguments[2]:("string"==typeof arguments[2]||"number"==typeof arguments[2])&&(s=arguments[2]),i||(i={})):2==arguments.length?"object"==typeof arguments[1]?i=arguments[1]:(i={},s=arguments[1]):1==arguments.length,g.toString(n)){e=A.eventTypeToState(n),t.fixEventTime(i);var a=t.getEventTime(i);if(!i.ns_st_po&&s&&(i.ns_st_po=t.getInteger(s,0).toString()),i.ns_st_po&&S.getClip().setPlaybackTimeOffset(parseInt(i.ns_st_po)),n==g.PLAY||n==g.PAUSE||n==g.BUFFER||n==g.END||n==g.SEEK_START||n==g.AD_SKIP||n==g.BUFFER_STOP)A.transitionTo(n,e,i);else{if((n==g.LOAD||n==g.START)&&A.getCurrentState()!=u.IDLE)return;n!=g.ERROR||i.ns_st_er||(i.ns_st_er=r.UNKNOWN_VALUE),A.getCurrentState()!=u.IDLE&&A.getCurrentState()!=u.PLAYBACK_NOT_STARTED&&A.getCurrentState()!=u.SEEKING_BEFORE_PLAYBACK&&A.getCurrentState()!=u.BUFFERING_BEFORE_PLAYBACK&&(S.getClip().addElapsedTime(a),S.getClip().setElapsedTimestamp(a));var l,_,o,p=!0,c=!1;switch(n){case g.BIT_RATE:l="ns_st_br",_="ns_st_pbr",c=!0;break;case g.PLAYBACK_RATE:l="ns_st_rt",_="ns_st_prt",c=!0;break;case g.VOLUME:l="ns_st_vo",_="ns_st_pvo",c=!0;break;case g.WINDOW_STATE:l="ns_st_ws",_="ns_st_pws",c=!0;break;case g.AUDIO:l="ns_st_at",_="ns_st_pat",c=!1;break;case g.VIDEO:l="ns_st_vt",_="ns_st_pvt",c=!1;break;case g.SUBS:l="ns_st_tt",_="ns_st_ptt",c=!1;break;case g.CDN:l="ns_st_cdn",_="ns_st_pcdn",c=!1;break;default:p=!1}if(p&&i.hasOwnProperty(l)&&(c?(v.getLabels().hasOwnProperty(l)&&(o=v.getLabels()[l],i[_]=o),v.setLabel(l,i[l])):(S.getClip().getLabels().hasOwnProperty(l)&&(o=S.getClip().getLabels()[l],i[_]=o),S.getClip().setLabel(l,i[l]))),p&&A.getCurrentState()!=u.PLAYING&&A.getCurrentState()!=u.BUFFERING_DURING_PLAYBACK)return;i.ns_st_po||(i.ns_st_po=String(S.getClip().getExpectedPlaybackPosition(a))),(A.getCurrentState()==u.PLAYING||A.getCurrentState()==u.BUFFERING_DURING_PLAYBACK)&&(S.addPlaybackTime(a),S.setPlaybackTimestamp(a),S.getClip().addPlaybackTime(a),S.getClip().setPlaybackTimestamp(a),S.getClip().addInterval(parseInt(i.ns_st_po)),S.getClip().setPlaybackStartPosition(parseInt(i.ns_st_po))),(A.getCurrentState()==u.BUFFERING_BEFORE_PLAYBACK||A.getCurrentState()==u.BUFFERING_DURING_PAUSE||A.getCurrentState()==u.BUFFERING_DURING_PLAYBACK||A.getCurrentState()==u.BUFFERING_DURING_SEEKING)&&(S.addBufferingTime(a),S.setBufferingTimestamp(a),S.getClip().addBufferingTime(a),S.getClip().setBufferingTimestamp(a)),T.newEvent(n,i)}}},getLabels:function(){return m},getState:function(){return A.getCurrentState()},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&v.setLabel(t,e[t])},getLabel:function(e){return m[e]},setLabel:function(e,t){null==t?delete m[e]:m[e]=t},getLoadTimeOffset:function(){return A.getLoadTimeOffset()},setLoadTimeOffset:function(e){A.setLoadTimeOffset(e)},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),s=0,a=i.length;a>s;s++){var l=i[s],r=l.split("=");2==r.length?v.setLabel(r[0],t(r[1])):1==r.length&&v.setLabel(o.PAGE_NAME_LABEL,t(r[0]))}e=e.substring(0,n+1)}}else e+="?";return C=e},getPixelURL:function(){return C?C:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?C=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?C=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},setImplementationType:function(e){A.getCurrentState()!=u.IDLE||e!=_.SINGLE_CLIP&&e!=_.SEGMENTED&&e!=_.REDUCED||S.setLabel("ns_st_it",_.toString(e))},isPauseOnBufferingEnabled:function(){return A.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){A.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return A.isThrottlingEnabled()},setThrottlingEnabled:function(e){A.setThrottlingEnabled(e)},setThrottlingDelay:function(e){A.setThrottlingDelay(e)},getThrottlingDelay:function(){return A.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(e){S.getClip().setPlaybackIntervalMergeTolerance(e)},getPlaybackIntervalMergeTolerance:function(){return S.getClip().getPlaybackIntervalMergeTolerance()},setClip:function(e,n,i){if("undefined"==typeof i&&(i=!0),i&&A.getCurrentState()!==u.IDLE&&v.end(),A.getCurrentState()==u.IDLE){var s="",a=0;if(null!=e.ns_st_cn)s=String(e.ns_st_cn);else for(var l=0;l<U.length;l++)e[U[l]]&&(s+=U[l]+":"+e[U[l]]+";");S.getClip().isClipStarted()?(S.hashExists(S.getClip().getHash())||(S.storeHash(S.getClip().getHash()),S.storeClipNumber(S.getClip().getHash(),S.getClip().getClipNumber())),S.storeClipPlaybackCounters(),a=S.hashExists(s)?S.getClipNumber(s):t.exists(e.ns_st_cn)?parseInt(e.ns_st_cn):S.getMaxClipNumber()+1):a=S.hashExists(s)?S.getClipNumber(s):S.getClip().getClipNumber(),S.getClip().reset(),S.getClip().setHash(s),S.getClip().setClipNumber(a),S.getClip().setLabels(e,null);var r=S.getStoredClipRegisters(s);return r&&(S.getClip().setClipStarted(!0),S.getClip().setSegmentPlaybackCounter(r.segmentPlaybackCounter),S.getClip().setClipLoadCounter(r.clipLoadCounter),S.getClip().setAssetPlaybackCounter(r.assetPlaybackCounter),S.getClip().setLowestPartNumberPlayed(r.lowestPartNumberPlayed),S.getClip().setSeeking(r.seeking),S.getClip().setSeekingTimeBeforeEnd(r.seekingTimeBeforeEnd),S.getClip().setSeekStartPosition(r.seekingStartPosition),S.getClip().setClipPlaybackIntervals(r.clipPlaybackIntervals),S.getClip().setUniquePlaybackInterval(r.uniquePlaybackInterval),S.getClip().setLongestPlaybackInterval(r.longestPlaybackInterval),S.getClip().setVideoTrack(r.videoTrack),S.getClip().setAudioTrack(r.audioTrack),S.getClip().setSubtitleTrack(r.subtitleTrack),S.getClip().setCDN(r.cdn),S.getClip().setPreviousUniquePlaybackInterval(r.uniquePlaybackInterval),S.getClip().setPreviousEventIndependentUniquePlaybackInterval(r.uniquePlaybackInterval),S.getClip().setPreviousLongestPlaybackInterval(r.longestPlaybackInterval)),S.getClip().incrementClipLoadCounter(),S.getClip().isClipStarted()&&n&&(S.incrementPlayCounter(),S.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(e,t){return"undefined"==typeof t&&(t=!0),t&&A.getCurrentState()!==u.IDLE&&v.end(),A.getCurrentState()==u.IDLE?(S.isPlaylistStarted()&&S.reset(),S.setLabels(e,null),!0):!1},importState:function(){},exportState:function(){return{}},getVersion:function(){return o.STREAMSENSE_VERSION},addListener:function(e){A.addListener(e)},removeListener:function(e){A.removeListener(e)},getClip:function(){return S.getClip()},getPlaylist:function(){return S},setHttpGet:function(e){"function"==typeof e&&(v.getPlatformAPI().httpGet=e)},setHttpPost:function(e){"function"==typeof e&&(v.getPlatformAPI().httpPost=e)},setExitEndEvent:function(e){I=e},isExitEndEventEnabled:function(){return I}});var B,D;t.isBrowser()?(B=window,D=document):(B={},D={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),t.extend(this,{prepareUrl:s}),t.extend(this,{customNotify:a,viewNotify:function(e,t){e=e||v.getPixelURL(),e&&i(e,t)}}),t.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",p),window.addEventListener("unload",p)):window.attachEvent&&(window.attachEvent("onbeforeunload",p),window.attachEvent("onunload",p))),t.getNamespace().comScore&&(R=t.getNamespace().comScore.exports,k=R.c()),v.reset(),e&&v.setLabels(e),n&&v.setPixelURL(n)}}();return function(n){function i(e,t){return b[k]||a(e,t)}function s(){k=-1;for(var t=0;A>=t;t++)if(b.hasOwnProperty(String(t))){k=t;break}return e.StreamSense.activeIndex=k,k}function a(t,n){return t=t||null,n=n||null,t&&"object"==typeof t&&(n=t,t=null),b[++A]=new e.StreamSense(n,t),s(),b[A]}function l(){var t=!1,n=k;if("number"==typeof arguments[0]&&isFinite(arguments[0]))n=arguments[0];else if(arguments[0]instanceof e.StreamSense)for(var i in b)if(b.hasOwnProperty(i)&&b[i]===arguments[0]){n=i;break}return b.hasOwnProperty(String(n))&&(t=b[n],delete b[n],t.reset(),s()),t}function r(e){return e=e||{},i().setPlaylist(e),i().getPlaylist()}function g(e,t,n){return e=e||{},"number"==typeof t&&(e.ns_st_cn=String(t)),i().setClip(e,n),i().getClip()}function u(e,t,n){return"undefined"==typeof e?!1:(n=n||null,t=t||{},i().notify(e,t,n))}function _(e){"undefined"!=typeof e&&i().setLabels(e)}function o(){return i().getLabels()}function p(e){"undefined"!=typeof e&&i().getPlaylist().setLabels(e)}function c(){return i().getPlaylist().getLabels()}function P(e){"undefined"!=typeof e&&i().getClip().setLabels(e)}function f(){return i().getClip().getLabels()}function y(e){return i().reset(e||{})}function d(e){return i().getPlaylist().reset(e||{})}function m(e){return i().getClip().reset(e||{})}function C(e){return e=e||{},i().viewNotify(null,e)}function S(e,t){return arguments.length>2&&(e=arguments[1],t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=String(t)),i().customNotify(e,t)}function E(){return i().exportState()}function T(e){i().importState(e)}var b={},A=-1,k=-1;t.extend(n,{activeIndex:k,newInstance:a,"new":a,destroyInstance:l,destroy:l,newPlaylist:r,newClip:g,notify:u,setLabels:_,getLabels:o,setPlaylistLabels:p,getPlaylistLabels:c,setClipLabels:P,getClipLabels:f,resetInstance:y,resetPlaylist:d,resetClip:m,viewEvent:C,customEvent:S,exportState:E,importState:T})}(m),m.PlayerEvents=g,m.InternalStates=u,m.ImplementationType=_,m}(),e.StreamingTag=e.StreamingTag||function(){var n=e.StreamSense,i=(e.StreamSense.PlayerEvents,e.StreamSense.InternalStates||null),s=e.StreamSense.ImplementationType||null,a=null!=e.StreamSense.InternalStates&&null!=e.StreamSense.ImplementationType;return function(){var e={LongFormOnDemand:"11",ShortFormOnDemand:"12",Live:"13",UserGeneratedLongFormOnDemand:"21",UserGeneratedShortFormOnDemand:"22",UserGeneratedLive:"23",Bumper:"99",Other:"00"},l={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},r=function(e){function l(){if(a)if(t.getNamespace().comScore)y=new n,y.setImplementationType(s.REDUCED);else if(t.exists(e))if(d=t.isTrue(e.debug),t.exists(e.customerC2)&&e.customerC2.length>0){var i=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");y=new n,y.setPixelURL(i+".scorecardresearch.com/p?c1=2"),y.setLabel("c2",e.customerC2),y.setImplementationType(s.REDUCED)}else d&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function r(e){t.exists(e)||(e={});for(var n in C)C.hasOwnProperty(n)&&!t.exists(e[C[n]])&&("ns_st_ci"==C[n]?e.ns_st_ci="0":e[C[n]]="*null");return e}function g(e){for(var t in C)if(C.hasOwnProperty(t)&&!u(C[t],P,e))return!1;return!0}function u(e,n,i){if(t.exists(e)&&t.exists(n)&&t.exists(i)){var s=n[e],a=i[e];return t.exists(s)&&t.exists(a)&&s===a}return!1}function _(e){c++;var n={ns_st_cn:String(c),ns_st_pn:"1",ns_st_tp:"0"};t.extend(n,e),y.setClip(n),P=e,y.play()}function o(e){c++,e=r(e);var n={ns_st_cn:String(c),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};t.extend(n,e),y.setClip(n),y.play(),f=!1}function p(e,t){e=r(e),S==m.None&&(S=t),f&&S==t&&g(e)?(y.getClip().setLabels(e),y.getState()!=i.PLAYING&&y.play()):_(e),f=!0,S=t}var c=0,P=null,f=!1,y=null,d=!1,m={None:0,AudioContent:1,VideoContent:2},C=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],S=m.None;t.extend(this,{playAdvertisement:function(){if(y){d&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var e={ns_st_ct:"va"};o(e)}},playVideoAdvertisement:function(e,n){if(y){var i={ns_st_ct:"va"};n?i.ns_st_ct="va"+n:d&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),e&&t.extend(i,e),o(i)}},playAudioAdvertisement:function(e,n){if(y){var i={ns_st_ct:"aa"};n?i.ns_st_ct="aa"+n:d&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),e&&t.extend(i,e),o(i)}},playContentPart:function(e){if(y){d&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var n={ns_st_ct:"vc"};e&&t.extend(n,e),p(n,m.VideoContent)}},playVideoContentPart:function(e,n){if(y){var i={ns_st_ct:"vc"};n?i.ns_st_ct="vc"+n:d&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),e&&t.extend(i,e),p(i,m.VideoContent)}},playAudioContentPart:function(e,n){if(y){var i={ns_st_ct:"ac"};n?i.ns_st_ct="ac"+n:d&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),e&&t.extend(i,e),p(i,m.AudioContent)}},stop:function(){y&&y.pause()}}),l()};return function(e){}(r),r.ContentType=e,r.AdType=l,r}()}(),e});